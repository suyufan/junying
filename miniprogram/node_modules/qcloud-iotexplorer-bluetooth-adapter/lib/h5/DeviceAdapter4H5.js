"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DeviceAdapter4H5=exports.AdapterDeviceAdapter4H5=void 0;var tslib_1=require("tslib"),base_1=require("../base"),qcloud_iotexplorer_appdev_sdk_1=require("qcloud-iotexplorer-appdev-sdk"),arrayBufferToHexStringArray=qcloud_iotexplorer_appdev_sdk_1.AppDevSdk.utils.arrayBufferToHexStringArray;exports.AdapterDeviceAdapter4H5=function(e){return function(e){function r(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var o=e.apply(this,tslib_1.__spread(r))||this;return o.on("connect",(function(){var e,r,t=o,i=t.explorerDeviceId,n=t.deviceId,d=t.deviceName,c=t.originName,a=t.productId,s=t.extendInfo,p=t.serviceId;null===(e=o._h5Websocket)||void 0===e||e.send("Control",{action:"reportDeviceConnectStatus",payload:{connected:!0,explorerDeviceId:i,deviceId:n}}),null===(r=o._h5Websocket)||void 0===r||r.send("Control",{action:"h5_mirror_connect",payload:{serviceId:p,deviceId:n,deviceName:d,name:c,productId:a,extendInfo:s}})})).on("disconnect",(function(){var e,r,t=o,i=t.explorerDeviceId,n=t.deviceId;null===(e=o._h5Websocket)||void 0===e||e.send("Control",{action:"reportDeviceConnectStatus",payload:{connected:!1,explorerDeviceId:i,deviceId:n}}),null===(r=o._h5Websocket)||void 0===r||r.send("Control",{action:"h5_mirror_disconnect",payload:{explorerDeviceId:i,deviceId:n}})})),o}return tslib_1.__extends(r,e),r.prototype.write=function(e,r){return tslib_1.__awaiter(this,void 0,void 0,(function(){return tslib_1.__generator(this,(function(t){return"string"==typeof e?console.log("writeBLECharacteristicValue from H5",e):e instanceof ArrayBuffer&&(e=arrayBufferToHexStringArray(e).join("")),[2,this._write(e,r)]}))}))},r}(e)},exports.DeviceAdapter4H5=exports.AdapterDeviceAdapter4H5(base_1.DeviceAdapter);
//# sourceMappingURL=DeviceAdapter4H5.js.map