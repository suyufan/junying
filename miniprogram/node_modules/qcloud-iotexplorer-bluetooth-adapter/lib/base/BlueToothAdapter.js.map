{"version":3,"sources":["../../src/base/BlueToothAdapter.ts"],"names":["qcloud_iotexplorer_appdev_sdk_1","require","lodash_uniqwith_1","tslib_1","__importDefault","BlueToothBase_1","DeviceAdapter_1","nativeBluetoothApi_1","BluetoothDeviceCacheManager_1","SimpleStore_1","qcloud_iotexplorer_common_libs_1","throttle_1","types_1","_a","AppDevSdk","utils","isEmpty","noop","delay","DefaultOnDeviceFoundThrottle","BlueToothAdapter","_super","_b","deviceAdapters","actions","bluetoothApi","h5Websocket","devMode","_c","ignoreAnonymousDevices","_d","mpDisableRefreshCache","_this","call","this","_devMode","_ignoreAnonymousDevices","_bluetoothApi","_actions","_deviceAdapterFactoryMap","_productIdMap","_inited","_available","_discovering","_onBluetoothDeviceFoundHandler","_onDeviceFoundThrottle","_setOnDeviceFoundThrottle","_onBluetoothScanAdvertisingHandler","_initPromise","_searchDevicePromise","_deviceAdapterStore","SimpleStore","filter","params","item","deviceId","explorerDeviceId","_deviceConnectStatusStore","_initPeripheralServerPromise","_mpDisableRefreshCache","addAdapter","console","warn","_h5Websocket","default","deviceCacheManager","BluetoothDeviceCacheManager","__extends","Object","defineProperty","prototype","deviceAdapter","forceAdd","doAdd","adapter","isPrototypeOf","DeviceAdapter","serviceId","error","splice","forEach","_filterDevices","deviceFilters","SpecificDeviceId","devices","serviceIds","deviceName","productId","ignoreDeviceIds","_e","ignoreServiceIds","_f","extendInfo","deviceFilter","log","length","_getSupportServiceIds","ignoreAdapterMap_1","map","id","results","i","l","find","matchedDevice","j","lenJ","push","keys","setOnDeviceFoundThrottle","onDeviceFoundThrottle","resetOnDeviceFoundThrottle","onDeviceConnectStatusChange","connected","target","get","emit","set","getAll","startBluetoothDevicesDiscovery","__assign","powerLevel","allowDuplicatesKey","stopBluetoothDevicesDiscovery","cleanup","action","closeBluetoothAdapter","isConnected","disconnectDevice","init","Promise","resolve","reject","__awaiter","errCode","all","initProductIds","sent","handleBlueToothAdapterState_1","available","discovering","getSystemInfo","systemInfo","platform","toLowerCase","indexOf","onBleConnectionStateChange","error_1","handleBleConnectionStateChange_1","handleBLECharacteristicValueChange_1","onBLECharacteristicValueChange","handleBlueToothDeviceFound_1","throttle","onBluetoothDeviceFound","updateDelay","openOptions","mode","assign","refreshCache","openBluetoothAdapter","onBluetoothAdapterStateChange","onBLEConnectionStateChange","addCleanupTask","offBluetoothAdapterStateChange","offBLEConnectionStateChange","offBLECharacteristicValueChange","offBluetoothDeviceFound","getBluetoothAdapterState","apply","_normalizeError","err_1","getDeviceAdapter","characteristicId","value","getBluetoothDevices","name","foundDevices","currentFoundDevices","err","cacheDevices","startSearch","onSearch","onError","timeout","_g","startBluetoothDevicesDiscoveryParams","_h","_deviceFindedLength","matchedDeviceListCache","handleFilterDevices","deviceMap","isFromCacheBroadcast","__spread","x","y","_onError","stopSearch","matchedDevices","onAdapterStateChange_1","on","off","setTimeout","err_2","searchDevice","ignoreWarning","ignoreCache","disableCache","useCacheFoundDevices","deviceCache","getDeviceCache","onReject","onResolve","device","cacheFoundDevices","removeCleanupTask","err_3","stopSearchDevice","instantiateDeviceAdapter","SpecificDeviceAdapter","reuseAdapterInstance","bluetoothAdapter","_deviceConnected","remove","connectDevice","mac","autoNotify","enableDeviceCache","destroyAdapterAfterDisconnect","setDeviceCache","err_4","connectAdvertisingDevice","options","deviceParams","__rest","searchAndConnectDevice","deviceInfo","code","err_5","startScanAdvert","adverts","communicationMode","CommunicationMode","ADVERT","advert","matchAdvert","matchAdapter","advertFilter","onScanAdvert","stopScanAdvert","_initPeripheralServer","_advertisingQueue","SimpleQueue","autoStart","handler","businessData","duration","advertiseRequest","_blePeripheralServer","startAdvertising","connectable","stopAdvertising","onTaskSuccess","onSuccess","onTaskError","createBLEPeripheralServer","stop","close","err_7","err_6","advertising","Math","min","start","BlueToothBase","exports"],"mappings":"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"}