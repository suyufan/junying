"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FileSdkForMiniProgram=void 0;var tslib_1=require("tslib"),FileSdk_1=tslib_1.__importDefault(require("./FileSdk")),spark_md5_1=tslib_1.__importDefault(require("spark-md5")),FileSdkForMiniProgram=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return tslib_1.__extends(r,e),r.prototype.handleUpload=function(r,t){var i=this;return new Promise((function(s,a){var n=wx.getFileSystemManager();n.readFile({filePath:r.path,success:function(o){return tslib_1.__awaiter(i,void 0,void 0,(function(){var i,u,l,c=this;return tslib_1.__generator(this,(function(d){switch(d.label){case 0:return(i=new spark_md5_1.default.ArrayBuffer).append(o.data),u=i.end(!1),[4,e.prototype.getResourceUploadURL.call(this,r,u,t)];case 1:return l=d.sent().UploadUrl,wx.request({url:l,method:"PUT",data:n.readFileSync(r.path),success:function(){return tslib_1.__awaiter(c,void 0,void 0,(function(){var i,n;return tslib_1.__generator(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,e.prototype.createResource.call(this,r,u,t)];case 1:return(i=o.sent().ResourceName)&&(wx.showToast({title:"文件上传成功",icon:"success",duration:5e3}),s(i)),[3,3];case 2:return n=o.sent(),a(n.msg),wx.showToast({title:""+n.msg,icon:"error",duration:5e3}),[3,3];case 3:return[2]}}))}))}}),[2]}}))}))}})}))},r}(FileSdk_1.default);exports.FileSdkForMiniProgram=FileSdkForMiniProgram;
//# sourceMappingURL=FileSdkForMiniprogram.js.map