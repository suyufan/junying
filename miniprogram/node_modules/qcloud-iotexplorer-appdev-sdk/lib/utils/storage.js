"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.storage=void 0;var tslib_1=require("tslib"),pify_1=require("./pify"),env_detect_1=require("./env-detect");exports.storage={getItem:function(e){return tslib_1.__awaiter(this,void 0,void 0,(function(){var t;return tslib_1.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),env_detect_1.isMiniProgram?[4,pify_1.pify(wx.getStorage)({key:e})]:[3,2];case 1:return[2,t=r.sent().data];case 2:if(env_detect_1.isBrowser){if(t=window.localStorage.getItem(e))try{t=JSON.parse(t)}catch(e){}return[2,t]}r.label=3;case 3:return[3,5];case 4:return r.sent(),[2,null];case 5:return[2]}}))}))},setItem:function(e,t){return tslib_1.__awaiter(this,void 0,void 0,(function(){var r;return tslib_1.__generator(this,(function(s){switch(s.label){case 0:return s.trys.push([0,4,,5]),env_detect_1.isMiniProgram?[4,pify_1.pify(wx.setStorage)({key:e,data:t})]:[3,2];case 1:return s.sent(),[3,3];case 2:if(env_detect_1.isBrowser){if(t)try{t=JSON.stringify(t)}catch(e){}window.localStorage.setItem(e,t)}s.label=3;case 3:return[3,5];case 4:return r=s.sent(),console.error("setStorage error",r),[3,5];case 5:return[2]}}))}))},removeItem:function(e){return tslib_1.__awaiter(this,void 0,void 0,(function(){var t;return tslib_1.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),env_detect_1.isMiniProgram?[4,pify_1.pify(wx.removeStorage)({key:e})]:[3,2];case 1:return r.sent(),[3,3];case 2:env_detect_1.isBrowser&&window.localStorage.removeItem(e),r.label=3;case 3:return[3,5];case 4:return t=r.sent(),console.error("removeStorage error",t),[3,5];case 5:return[2]}}))}))}};
//# sourceMappingURL=storage.js.map